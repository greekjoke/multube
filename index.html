<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="max-age=3600, must-revalidate" />    
  <title>MulTube</title>
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"
    integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
    crossorigin="anonymous"></script>
  <script src="https://www.youtube.com/iframe_api"></script>       
  <script src="app.js"></script>
  <script src="draggable.js"></script>
  <script src="task.js"></script>
  <link rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">  
  <link rel="stylesheet" href="style.css">    
  <link rel="icon" type="image/ico" href="favicon.ico"/>  
</head>

<body>
  <header>
    <div id="logo"><img src="media/logo.svg"/></div>
    <div id="title"><h1>MulTube</h1></div>

    <!-- main menu -->
    <div id="topmenu" class="menu">
      <ul>
        <li>
          <b>Task</b>
          <ul>
            <li>Add Youtube video</li>
            <li>Add audio file</li>
            <li>Add text reading</li>
            <li>Add picture</li>
            <li>Add iFrame</li>
            <li>Remove all</li>
          </ul>
        </li>
        <li>
          <b>Preset</b>
          <ul>
            <li>Add preset</li>
            <li>Remove current</li>
            <li>
              <b>List</b>
              <ul>
                <li>Default</li>
                <li>Test1</li>
                <li>Test22</li>
              </ul>
            </li>
            <li>Some line</li>
            <li>Again line</li>
            <li>Final line</li>
          </ul>
        </li>
        <li>
          <b>Settings</b>
          <ul>
            <li>Export to file</li>
            <li>Import from file</li>            
            <li>
              <b>Color scheme</b>
              <ul>                
                <li>Light</li>
                <li>Dark</li>
              </ul>
            </li>            
          </ul>          
        </li>
        <li><b><a target="_blank" href="https://greekjoke.github.io/multube/readme.md">Help</a></b></li>
      </ul>
      <!-- /main menu -->

    </div>
    <div id="gctrl">      
      <i class="fa-solid fa-stop"></i>
      <i class="fa-solid fa-play"></i>
      <i class="fa-solid fa-pause"></i>
      <i class="fa-solid fa-volume-xmark"></i>
      <i class="fa-solid fa-volume-high"></i>
      <span title="Speed">SP</span>
      <span title="Rewind to random position">RR</span>      
    </div>
  </header>  
  <div id="widgets">    
    <!--
    <div class="placeholder">No any tasks here yet</div>
    -->
    
    <div class="task draggable drop-receiver" id="task1">
      <div class="bar handle">
        <span class="icon"><i class="fa-solid fa-flask"></i></span>
        <span class="title">Untitled</span>
        <span class="status"><i class="fa-solid fa-battery-three-quarters"></i></span>
        <span class="settings menu">                    
            <ul>
              <li>
                <i class="fa-solid fa-gear"></i>
                <ul>
                  <li>Alpha</li>
                  <li>Betta</li>
                  <li>Gamma</li>
                </ul>
              </li>
            </ul>          
        </span>
        <span class="remove"><i class="fa-solid fa-xmark"></i></span>
      </div>
      <div class="content">
        #1
      </div>
    </div>      

    <div class="task draggable drop-receiver" id="task2">
      <div class="bar">
        <span class="icon"><i class="fa-solid fa-flask"></i></span>
        <span class="title">Untitled</span>
        <span class="status"><i class="fa-solid fa-battery-three-quarters"></i></span>        
        <span class="remove"><i class="fa-solid fa-xmark"></i></span>
      </div>
      <div class="content">
        #2
      </div>
    </div>
    
    <div class="task draggable drop-receiver"  id="task3">
      <div class="bar">
        <span class="icon"><i class="fa-solid fa-flask"></i></span>
        <span class="title">Untitled</span>
        <span class="status"><i class="fa-solid fa-battery-three-quarters"></i></span>        
        <span class="remove"><i class="fa-solid fa-xmark"></i></span>
      </div>
      <div class="content">
        #3
      </div>
    </div>
    
    <div class="task draggable drop-receiver" id="task4">
      <div class="bar">
        <span class="icon"><i class="fa-solid fa-flask"></i></span>
        <span class="title">Untitled</span>
        <span class="status"><i class="fa-solid fa-battery-three-quarters"></i></span>        
        <span class="remove"><i class="fa-solid fa-xmark"></i></span>
      </div>
      <div class="content">
        #4
      </div>
    </div>      
    
  </div>
</body>

<script>
  $(document).ready(function() {
    MtApp.init();

    // setup draggable
    var view = $('#widgets');
    window.MtDraggable(view, {
          sorting: true,
          sortHoriz: true,
          onDrop: function (movId, recv) {
              const target = $('#' + movId);

              if (target.length != 1) {
                  console.error('drop target not found', movId, recv);
                  return;
              }

              const dropBefore = recv.hasClass('drop-before');


              // TODO:
              console.log('onDrop', movId, recv, dropBefore);

          }
      });


  });
</script>

</html>
